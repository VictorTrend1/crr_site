{"ast":null,"code":"import React from'react';import{Typography,Box,Alert,Button,TextField}from'@mui/material';import{useAuth}from'../AuthContext';import{useNavigate}from'react-router-dom';import EventList from'./EventList';import AlarmIcon from'./AlarmIcon';import{useEffect,useState}from'react';import EventCreateForm from'./EventCreateForm';import EventRegisterForm from'./EventRegisterForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Dashboard(){const{user,login}=useAuth();const navigate=useNavigate();const[inactive,setInactive]=useState(false);const[refresh,setRefresh]=useState(0);useEffect(()=>{async function checkInactive(){if(user.role==='Voluntar'){setInactive(user.inactive);}}checkInactive();},[user]);if(!user)return null;return/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",mb:2,children:[\"Bun venit, \",user.name,\"!\",user.role==='Voluntar'&&/*#__PURE__*/_jsx(AlarmIcon,{active:inactive,message:\"Nu ai activitate de peste 3 luni!\"})]}),/*#__PURE__*/_jsxs(Alert,{severity:\"info\",sx:{mb:2},children:[\"Rolul t\\u0103u: \",/*#__PURE__*/_jsx(\"strong\",{children:user.role}),\" | Indicativ: \",/*#__PURE__*/_jsx(\"strong\",{children:user.indicator})]}),/*#__PURE__*/_jsxs(Box,{mt:3,p:2,sx:{border:'1px solid #eee',borderRadius:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:1,children:\"Profil\"}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",mb:2,children:\"Vizualizeaz\\u0103 \\u0219i partajeaz\\u0103 profilul t\\u0103u cu un cod QR unic\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",onClick:()=>navigate(\"/profile/\".concat(user.indicator)),children:\"Vezi Profilul Meu\"})]}),(user.role==='Organizator'||user.role==='Admin')&&/*#__PURE__*/_jsx(EventCreateForm,{onCreated:()=>setRefresh(r=>r+1)}),(user.role==='Voluntar'||user.role==='Organizator'||user.role==='Admin')&&/*#__PURE__*/_jsx(EventRegisterForm,{onRegistered:()=>setRefresh(r=>r+1)}),user.role!=='Vizitator'&&/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",mb:2,children:\"Evenimente\"}),/*#__PURE__*/_jsx(EventList,{},refresh)]}),user.role==='Vizitator'&&/*#__PURE__*/_jsxs(Box,{mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",mb:2,children:\"Evenimente publice\"}),/*#__PURE__*/_jsx(Typography,{children:\"Doar vizualizare. \\xCEnscrierea necesit\\u0103 cont Voluntar.\"}),/*#__PURE__*/_jsx(EventList,{})]})]});}","map":{"version":3,"names":["React","Typography","Box","Alert","Button","TextField","useAuth","useNavigate","EventList","AlarmIcon","useEffect","useState","EventCreateForm","EventRegisterForm","jsx","_jsx","jsxs","_jsxs","Dashboard","user","login","navigate","inactive","setInactive","refresh","setRefresh","checkInactive","role","mt","children","variant","mb","name","active","message","severity","sx","indicator","p","border","borderRadius","color","onClick","concat","onCreated","r","onRegistered"],"sources":["C:/Users/trand/Documents/site_crr/site/src/components/Dashboard.js"],"sourcesContent":["import React from 'react';\r\nimport { Typography, Box, Alert, Button, TextField } from '@mui/material';\r\nimport { useAuth } from '../AuthContext';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport EventList from './EventList';\r\nimport AlarmIcon from './AlarmIcon';\r\nimport { useEffect, useState } from 'react';\r\nimport EventCreateForm from './EventCreateForm';\r\nimport EventRegisterForm from './EventRegisterForm';\r\n\r\nexport default function Dashboard() {\r\n  const { user, login } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [inactive, setInactive] = useState(false);\r\n  const [refresh, setRefresh] = useState(0);\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    async function checkInactive() {\r\n      if (user.role === 'Voluntar') {\r\n        setInactive(user.inactive);\r\n      }\r\n    }\r\n    checkInactive();\r\n  }, [user]);\r\n\r\n  if (!user) return null;\r\n\r\n  return (\r\n    <Box mt={4}>\r\n      <Typography variant=\"h4\" mb={2}>\r\n        Bun venit, {user.name}!\r\n        {user.role === 'Voluntar' && <AlarmIcon active={inactive} message=\"Nu ai activitate de peste 3 luni!\" />}\r\n      </Typography>\r\n      <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n        Rolul tău: <strong>{user.role}</strong> | Indicativ: <strong>{user.indicator}</strong>\r\n      </Alert>\r\n\r\n      {/* Profile section */}\r\n      <Box mt={3} p={2} sx={{ border: '1px solid #eee', borderRadius: 1 }}>\r\n        <Typography variant=\"h6\" mb={1}>Profil</Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\" mb={2}>\r\n          Vizualizează și partajează profilul tău cu un cod QR unic\r\n        </Typography>\r\n        <Button \r\n          variant=\"outlined\" \r\n          onClick={() => navigate(`/profile/${user.indicator}`)}\r\n        >\r\n          Vezi Profilul Meu\r\n        </Button>\r\n              </Box>\r\n\r\n\r\n      {/* Event creation for Organizator/Admin */}\r\n      {(user.role === 'Organizator' || user.role === 'Admin') && (\r\n        <EventCreateForm onCreated={() => setRefresh(r => r + 1)} />\r\n      )}\r\n      {/* Event registration for Voluntar/Organizator/Admin */}\r\n      {(user.role === 'Voluntar' || user.role === 'Organizator' || user.role === 'Admin') && (\r\n        <EventRegisterForm onRegistered={() => setRefresh(r => r + 1)} />\r\n      )}\r\n      {/* Event list */}\r\n      {user.role !== 'Vizitator' && (\r\n        <Box mt={4}>\r\n          <Typography variant=\"h5\" mb={2}>Evenimente</Typography>\r\n          <EventList key={refresh} />\r\n        </Box>\r\n      )}\r\n      {user.role === 'Vizitator' && (\r\n        <Box mt={4}>\r\n          <Typography variant=\"h5\" mb={2}>Evenimente publice</Typography>\r\n          <Typography>Doar vizualizare. Înscrierea necesită cont Voluntar.</Typography>\r\n          <EventList />\r\n        </Box>\r\n      )}\r\n\r\n\r\n    </Box>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}