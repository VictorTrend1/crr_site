{"ast":null,"code":"import _objectSpread from\"C:/Users/trand/Documents/site_crr/site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Dialog,DialogTitle,DialogContent,DialogActions,TextField,Button,Box,Typography,Alert}from'@mui/material';import{generateScutirePdf}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ScutireForm=_ref=>{let{open,onClose,onSuccess}=_ref;const[formData,setFormData]=useState({scoala:'',clasa:'',numarContract:'',data:''});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const handleInputChange=field=>event=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[field]:event.target.value}));};const handleSubmit=async event=>{event.preventDefault();setLoading(true);setError('');try{// Validate required fields\nif(!formData.scoala||!formData.clasa||!formData.numarContract||!formData.data){setError('Toate câmpurile sunt obligatorii');setLoading(false);return;}// Generate the scutire PDF\nconst response=await generateScutirePdf(formData);// Create download link\nconst blob=new Blob([response.data],{type:'application/pdf'});const url=window.URL.createObjectURL(blob);const link=document.createElement('a');link.href=url;link.download=\"Scutire_\".concat(formData.scoala.replace(/\\s+/g,'_'),\"_\").concat(formData.clasa,\".pdf\");document.body.appendChild(link);link.click();document.body.removeChild(link);window.URL.revokeObjectURL(url);// Reset form and close dialog\nsetFormData({scoala:'',clasa:'',numarContract:'',data:''});onSuccess('Scutirea a fost generată cu succes!');onClose();}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Eroare la generarea scutirii');}finally{setLoading(false);}};const handleClose=()=>{if(!loading){setFormData({scoala:'',clasa:'',numarContract:'',data:''});setError('');onClose();}};return/*#__PURE__*/_jsxs(Dialog,{open:open,onClose:handleClose,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Genereaz\\u0103 Scutire\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",gap:2,sx:{mt:1},children:[error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}),/*#__PURE__*/_jsx(TextField,{label:\"\\u0218coala/Liceul *\",value:formData.scoala,onChange:handleInputChange('scoala'),fullWidth:true,required:true,disabled:loading}),/*#__PURE__*/_jsx(TextField,{label:\"Clasa *\",value:formData.clasa,onChange:handleInputChange('clasa'),fullWidth:true,required:true,disabled:loading}),/*#__PURE__*/_jsx(TextField,{label:\"Num\\u0103rul contractului de voluntariat *\",value:formData.numarContract,onChange:handleInputChange('numarContract'),fullWidth:true,required:true,disabled:loading}),/*#__PURE__*/_jsx(TextField,{label:\"Data *\",type:\"date\",value:formData.data,onChange:handleInputChange('data'),fullWidth:true,required:true,disabled:loading,InputLabelProps:{shrink:true}})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleClose,disabled:loading,children:\"Anuleaz\\u0103\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:loading,sx:{bgcolor:'#d32f2f','&:hover':{bgcolor:'#b71c1c'}},children:loading?'Se generează...':'Generează Scutire'})]})]})]});};export default ScutireForm;","map":{"version":3,"names":["React","useState","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","Box","Typography","Alert","generateScutirePdf","jsx","_jsx","jsxs","_jsxs","ScutireForm","_ref","open","onClose","onSuccess","formData","setFormData","scoala","clasa","numarContract","data","loading","setLoading","error","setError","handleInputChange","field","event","prev","_objectSpread","target","value","handleSubmit","preventDefault","response","blob","Blob","type","url","window","URL","createObjectURL","link","document","createElement","href","download","concat","replace","body","appendChild","click","removeChild","revokeObjectURL","err","_err$response","_err$response$data","msg","handleClose","maxWidth","fullWidth","children","onSubmit","display","flexDirection","gap","sx","mt","severity","label","onChange","required","disabled","InputLabelProps","shrink","onClick","variant","bgcolor"],"sources":["C:/Users/trand/Documents/site_crr/site/src/components/ScutireForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  Alert\r\n} from '@mui/material';\r\nimport { generateScutirePdf } from '../api';\r\n\r\nconst ScutireForm = ({ open, onClose, onSuccess }) => {\r\n  const [formData, setFormData] = useState({\r\n    scoala: '',\r\n    clasa: '',\r\n    numarContract: '',\r\n    data: ''\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  const handleInputChange = (field) => (event) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: event.target.value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    setError('');\r\n\r\n    try {\r\n      // Validate required fields\r\n      if (!formData.scoala || !formData.clasa || !formData.numarContract || !formData.data) {\r\n        setError('Toate câmpurile sunt obligatorii');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Generate the scutire PDF\r\n      const response = await generateScutirePdf(formData);\r\n      \r\n      // Create download link\r\n      const blob = new Blob([response.data], { type: 'application/pdf' });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `Scutire_${formData.scoala.replace(/\\s+/g, '_')}_${formData.clasa}.pdf`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n\r\n      // Reset form and close dialog\r\n      setFormData({\r\n        scoala: '',\r\n        clasa: '',\r\n        numarContract: '',\r\n        data: ''\r\n      });\r\n      onSuccess('Scutirea a fost generată cu succes!');\r\n      onClose();\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Eroare la generarea scutirii');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    if (!loading) {\r\n      setFormData({\r\n        scoala: '',\r\n        clasa: '',\r\n        numarContract: '',\r\n        data: ''\r\n      });\r\n      setError('');\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onClose={handleClose} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>Generează Scutire</DialogTitle>\r\n      <form onSubmit={handleSubmit}>\r\n        <DialogContent>\r\n          <Box display=\"flex\" flexDirection=\"column\" gap={2} sx={{ mt: 1 }}>\r\n            {error && <Alert severity=\"error\">{error}</Alert>}\r\n            \r\n            <TextField\r\n              label=\"Școala/Liceul *\"\r\n              value={formData.scoala}\r\n              onChange={handleInputChange('scoala')}\r\n              fullWidth\r\n              required\r\n              disabled={loading}\r\n            />\r\n            \r\n            <TextField\r\n              label=\"Clasa *\"\r\n              value={formData.clasa}\r\n              onChange={handleInputChange('clasa')}\r\n              fullWidth\r\n              required\r\n              disabled={loading}\r\n            />\r\n            \r\n            <TextField\r\n              label=\"Numărul contractului de voluntariat *\"\r\n              value={formData.numarContract}\r\n              onChange={handleInputChange('numarContract')}\r\n              fullWidth\r\n              required\r\n              disabled={loading}\r\n            />\r\n            \r\n            <TextField\r\n              label=\"Data *\"\r\n              type=\"date\"\r\n              value={formData.data}\r\n              onChange={handleInputChange('data')}\r\n              fullWidth\r\n              required\r\n              disabled={loading}\r\n              InputLabelProps={{ shrink: true }}\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} disabled={loading}>\r\n            Anulează\r\n          </Button>\r\n          <Button \r\n            type=\"submit\" \r\n            variant=\"contained\" \r\n            disabled={loading}\r\n            sx={{ bgcolor: '#d32f2f', '&:hover': { bgcolor: '#b71c1c' } }}\r\n          >\r\n            {loading ? 'Se generează...' : 'Generează Scutire'}\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default ScutireForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}