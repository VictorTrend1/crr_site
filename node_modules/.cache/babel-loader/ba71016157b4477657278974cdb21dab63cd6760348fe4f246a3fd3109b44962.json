{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{getMe}from'./api';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export function AuthProvider(_ref){let{children}=_ref;const[user,setUser]=useState(null);const[loading,setLoading]=useState(true);// Fetch user on mount to restore session\nuseEffect(()=>{getMe().then(res=>{setUser(res.data);}).catch(()=>{setUser(null);}).finally(()=>setLoading(false));},[]);const login=user=>{setUser(user);};const logout=()=>{setUser(null);};if(loading)return null;// Or a loading spinner\nreturn/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,isAuthenticated:!!user,login,logout},children:children});}export function useAuth(){return useContext(AuthContext);}","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","getMe","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","loading","setLoading","then","res","data","catch","finally","login","logout","Provider","value","isAuthenticated","useAuth"],"sources":["C:/Users/trand/Documents/site_crr/site/src/AuthContext.js"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport { getMe } from './api';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch user on mount to restore session\r\n  useEffect(() => {\r\n    getMe()\r\n      .then(res => {\r\n        setUser(res.data);\r\n      })\r\n      .catch(() => {\r\n        setUser(null);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  }, []);\r\n\r\n  const login = (user) => {\r\n    setUser(user);\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n  };\r\n\r\n  if (loading) return null; // Or a loading spinner\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, isAuthenticated: !!user, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC7E,OAASC,KAAK,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE9B,KAAM,CAAAC,WAAW,cAAGP,aAAa,CAAC,CAAC,CAEnC,MAAO,SAAS,CAAAQ,YAAYA,CAAAC,IAAA,CAAe,IAAd,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACW,OAAO,CAAEC,UAAU,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACAC,SAAS,CAAC,IAAM,CACdC,KAAK,CAAC,CAAC,CACJW,IAAI,CAACC,GAAG,EAAI,CACXJ,OAAO,CAACI,GAAG,CAACC,IAAI,CAAC,CACnB,CAAC,CAAC,CACDC,KAAK,CAAC,IAAM,CACXN,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAAC,CACDO,OAAO,CAAC,IAAML,UAAU,CAAC,KAAK,CAAC,CAAC,CACrC,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAM,KAAK,CAAIT,IAAI,EAAK,CACtBC,OAAO,CAACD,IAAI,CAAC,CACf,CAAC,CAED,KAAM,CAAAU,MAAM,CAAGA,CAAA,GAAM,CACnBT,OAAO,CAAC,IAAI,CAAC,CACf,CAAC,CAED,GAAIC,OAAO,CAAE,MAAO,KAAI,CAAE;AAE1B,mBACEP,IAAA,CAACC,WAAW,CAACe,QAAQ,EAACC,KAAK,CAAE,CAAEZ,IAAI,CAAEa,eAAe,CAAE,CAAC,CAACb,IAAI,CAAES,KAAK,CAAEC,MAAO,CAAE,CAAAX,QAAA,CAC3EA,QAAQ,CACW,CAAC,CAE3B,CAEA,MAAO,SAAS,CAAAe,OAAOA,CAAA,CAAG,CACxB,MAAO,CAAAxB,UAAU,CAACM,WAAW,CAAC,CAChC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}