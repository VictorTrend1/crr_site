{"ast":null,"code":"import _objectSpread from\"C:/Users/trand/Documents/site_crr/site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{Card,CardContent,Typography,List,CircularProgress,Box,Button,Dialog,DialogTitle,DialogContent,DialogActions,IconButton}from'@mui/material';import{getEvents,deleteEvent,removeVolunteerFromEvent}from'../api';import{useAuth}from'../AuthContext';import{Link,useNavigate}from'react-router-dom';import{QrCode,LocationOn,AccessTime}from'@mui/icons-material';import QRCodeScanner from'./QRCodeScanner';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function EventList(){const{user}=useAuth();const[events,setEvents]=useState([]);const[loading,setLoading]=useState(true);const[hidden,setHidden]=useState(()=>{// Persist hidden events in localStorage per user\nconst key=user?\"hiddenEvents_\".concat(user.id):null;return key?JSON.parse(localStorage.getItem(key)||'[]'):[];});const[visible,setVisible]=useState(()=>{const key=user?\"visibleEvents_\".concat(user.id):null;return key?JSON.parse(localStorage.getItem(key)||'[]'):[];});const[showQRCode,setShowQRCode]=useState(false);const[selectedEvent,setSelectedEvent]=useState(null);const[showQRScanner,setShowQRScanner]=useState(false);const navigate=useNavigate();useEffect(()=>{// Update hidden and visible state if user changes\nif(user){const hiddenKey=\"hiddenEvents_\".concat(user.id);setHidden(JSON.parse(localStorage.getItem(hiddenKey)||'[]'));const visibleKey=\"visibleEvents_\".concat(user.id);setVisible(JSON.parse(localStorage.getItem(visibleKey)||'[]'));}},[user]);const handleDelete=async id=>{if(!window.confirm('Sigur vrei să ștergi acest eveniment?'))return;try{await deleteEvent(id);setEvents(events=>events.filter(e=>e._id!==id));}catch(_unused){}};const handleHide=id=>{const hiddenKey=\"hiddenEvents_\".concat(user.id);const visibleKey=\"visibleEvents_\".concat(user.id);const newHidden=[...hidden,id];setHidden(newHidden);localStorage.setItem(hiddenKey,JSON.stringify(newHidden));// Remove from visible\nconst newVisible=visible.filter(v=>v!==id);setVisible(newVisible);localStorage.setItem(visibleKey,JSON.stringify(newVisible));};const handleExit=async eventId=>{if(!window.confirm('Sigur vrei să te retragi de la acest eveniment?'))return;try{await removeVolunteerFromEvent(eventId,user.id);// Optionally, refresh events from backend\nsetEvents(events=>events.map(e=>e._id===eventId?_objectSpread(_objectSpread({},e),{},{volunteers:(e.volunteers||[]).filter(v=>(v.id||v._id)!==user.id)}):e));}catch(_unused2){}};useEffect(()=>{async function fetchEvents(){try{const res=await getEvents();if(!Array.isArray(res.data)){setEvents([]);return;}setEvents(res.data);}catch(err){setEvents([]);}finally{setLoading(false);}}fetchEvents();},[user]);if(loading)return/*#__PURE__*/_jsx(Box,{textAlign:\"center\",mt:4,children:/*#__PURE__*/_jsx(CircularProgress,{})});// Only show events in visible for volunteers, all for others\nlet visibleEvents=events;if(user.role==='Voluntar'){visibleEvents=events.filter(event=>visible.includes(event._id));}else{visibleEvents=events.filter(event=>!hidden.includes(event._id));}if(!visibleEvents.length)return/*#__PURE__*/_jsx(Typography,{mt:4,children:\"Nu exist\\u0103 evenimente.\"});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(List,{children:visibleEvents.map(event=>{// Check if volunteer is registered\nconst isRegistered=user.role==='Voluntar'&&event.volunteers&&event.volunteers.some(v=>(v.id||v._id)===user.id);return/*#__PURE__*/_jsx(Card,{sx:{mb:2},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:event.title}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{display:'flex',alignItems:'center',gap:1,mb:1},children:[/*#__PURE__*/_jsx(AccessTime,{fontSize:\"small\"}),new Date(event.date).toLocaleString('ro-RO')]}),event.endDate&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{display:'flex',alignItems:'center',gap:1,mb:1},children:[/*#__PURE__*/_jsx(AccessTime,{fontSize:\"small\"}),\"P\\xE2n\\u0103 la: \",new Date(event.endDate).toLocaleString('ro-RO')]}),event.location&&/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",sx:{display:'flex',alignItems:'center',gap:1,mb:1},children:[/*#__PURE__*/_jsx(LocationOn,{fontSize:\"small\"}),event.location.name||event.location.address||'Locație specificată']}),event.description&&/*#__PURE__*/_jsx(Typography,{variant:\"body2\",sx:{mb:2},children:event.description}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:1,flexWrap:\"wrap\",children:[/*#__PURE__*/_jsx(Button,{component:Link,to:\"/events/\".concat(event._id),variant:\"outlined\",size:\"small\",children:\"Detalii\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>{setSelectedEvent(event);setShowQRCode(true);},variant:\"outlined\",size:\"small\",startIcon:/*#__PURE__*/_jsx(QrCode,{}),children:\"QR Code\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>setShowQRScanner(true),variant:\"contained\",size:\"small\",color:\"success\",startIcon:/*#__PURE__*/_jsx(QrCode,{}),children:\"Check-in\"})]}),(user.role==='Admin'||user.role==='Organizator'&&event.createdBy===user.id)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>navigate(\"/events/code/\".concat(event.code,\"/edit\")),variant:\"contained\",color:\"primary\",sx:{mt:1,mr:1},children:\"Editeaz\\u0103\"}),/*#__PURE__*/_jsx(Button,{onClick:()=>handleDelete(event._id),variant:\"contained\",color:\"error\",sx:{mt:1},children:\"\\u0218terge\"})]}),user.role==='Voluntar'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>handleHide(event._id),variant:\"outlined\",color:\"secondary\",sx:{mt:1,mr:1},children:\"Ascunde\"}),isRegistered&&/*#__PURE__*/_jsx(Button,{onClick:()=>handleExit(event._id),variant:\"contained\",color:\"warning\",sx:{mt:1},children:\"Retrage-te\"})]})]})},event._id);})}),/*#__PURE__*/_jsxs(Dialog,{open:showQRCode,onClose:()=>setShowQRCode(false),maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"QR Code pentru Check-in\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Box,{display:\"flex\",flexDirection:\"column\",alignItems:\"center\",gap:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:selectedEvent===null||selectedEvent===void 0?void 0:selectedEvent.title}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Cod eveniment: \",selectedEvent===null||selectedEvent===void 0?void 0:selectedEvent.code]}),(selectedEvent===null||selectedEvent===void 0?void 0:selectedEvent.qrCode)&&/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(\"img\",{src:selectedEvent.qrCode,alt:\"QR Code\",style:{maxWidth:'100%',height:'auto'}})}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",textAlign:\"center\",children:\"Scana\\u021Bi acest QR code pentru a v\\u0103 \\xEEnregistra la eveniment\"})]})}),/*#__PURE__*/_jsx(DialogActions,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>setShowQRCode(false),children:\"\\xCEnchide\"})})]}),/*#__PURE__*/_jsx(QRCodeScanner,{open:showQRScanner,onClose:()=>setShowQRScanner(false),onSuccess:data=>{console.log('Check-in successful:',data);// Optionally refresh events or show success message\n}})]});}","map":{"version":3,"names":["React","useEffect","useState","Card","CardContent","Typography","List","CircularProgress","Box","Button","Dialog","DialogTitle","DialogContent","DialogActions","IconButton","getEvents","deleteEvent","removeVolunteerFromEvent","useAuth","Link","useNavigate","QrCode","LocationOn","AccessTime","QRCodeScanner","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EventList","user","events","setEvents","loading","setLoading","hidden","setHidden","key","concat","id","JSON","parse","localStorage","getItem","visible","setVisible","showQRCode","setShowQRCode","selectedEvent","setSelectedEvent","showQRScanner","setShowQRScanner","navigate","hiddenKey","visibleKey","handleDelete","window","confirm","filter","e","_id","_unused","handleHide","newHidden","setItem","stringify","newVisible","v","handleExit","eventId","map","_objectSpread","volunteers","_unused2","fetchEvents","res","Array","isArray","data","err","textAlign","mt","children","visibleEvents","role","event","includes","length","isRegistered","some","sx","mb","variant","title","color","display","alignItems","gap","fontSize","Date","date","toLocaleString","endDate","location","name","address","description","flexWrap","component","to","size","onClick","startIcon","createdBy","code","mr","open","onClose","maxWidth","fullWidth","flexDirection","qrCode","src","alt","style","height","onSuccess","console","log"],"sources":["C:/Users/trand/Documents/site_crr/site/src/components/EventList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Card, CardContent, Typography, List, CircularProgress, Box, Button, Dialog, DialogTitle, DialogContent, DialogActions, IconButton } from '@mui/material';\r\nimport { getEvents, deleteEvent, removeVolunteerFromEvent } from '../api';\r\nimport { useAuth } from '../AuthContext';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { QrCode, LocationOn, AccessTime } from '@mui/icons-material';\r\nimport QRCodeScanner from './QRCodeScanner';\r\n\r\nexport default function EventList() {\r\n  const { user } = useAuth();\r\n  const [events, setEvents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [hidden, setHidden] = useState(() => {\r\n    // Persist hidden events in localStorage per user\r\n    const key = user ? `hiddenEvents_${user.id}` : null;\r\n    return key ? JSON.parse(localStorage.getItem(key) || '[]') : [];\r\n  });\r\n  const [visible, setVisible] = useState(() => {\r\n    const key = user ? `visibleEvents_${user.id}` : null;\r\n    return key ? JSON.parse(localStorage.getItem(key) || '[]') : [];\r\n  });\r\n  const [showQRCode, setShowQRCode] = useState(false);\r\n  const [selectedEvent, setSelectedEvent] = useState(null);\r\n  const [showQRScanner, setShowQRScanner] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    // Update hidden and visible state if user changes\r\n    if (user) {\r\n      const hiddenKey = `hiddenEvents_${user.id}`;\r\n      setHidden(JSON.parse(localStorage.getItem(hiddenKey) || '[]'));\r\n      const visibleKey = `visibleEvents_${user.id}`;\r\n      setVisible(JSON.parse(localStorage.getItem(visibleKey) || '[]'));\r\n    }\r\n  }, [user]);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Sigur vrei să ștergi acest eveniment?')) return;\r\n    try {\r\n      await deleteEvent(id);\r\n      setEvents(events => events.filter(e => e._id !== id));\r\n    } catch {}\r\n  };\r\n\r\n  const handleHide = (id) => {\r\n    const hiddenKey = `hiddenEvents_${user.id}`;\r\n    const visibleKey = `visibleEvents_${user.id}`;\r\n    const newHidden = [...hidden, id];\r\n    setHidden(newHidden);\r\n    localStorage.setItem(hiddenKey, JSON.stringify(newHidden));\r\n    // Remove from visible\r\n    const newVisible = visible.filter(v => v !== id);\r\n    setVisible(newVisible);\r\n    localStorage.setItem(visibleKey, JSON.stringify(newVisible));\r\n  };\r\n\r\n  const handleExit = async (eventId) => {\r\n    if (!window.confirm('Sigur vrei să te retragi de la acest eveniment?')) return;\r\n    try {\r\n      await removeVolunteerFromEvent(eventId, user.id);\r\n      // Optionally, refresh events from backend\r\n      setEvents(events => events.map(e => e._id === eventId ? { ...e, volunteers: (e.volunteers || []).filter(v => (v.id || v._id) !== user.id) } : e));\r\n    } catch {}\r\n  };\r\n\r\n  useEffect(() => {\r\n    async function fetchEvents() {\r\n      try {\r\n        const res = await getEvents();\r\n        if (!Array.isArray(res.data)) {\r\n          setEvents([]);\r\n          return;\r\n        }\r\n        setEvents(res.data);\r\n      } catch (err) {\r\n        setEvents([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n    fetchEvents();\r\n  }, [user]);\r\n\r\n  if (loading) return <Box textAlign=\"center\" mt={4}><CircularProgress /></Box>;\r\n  // Only show events in visible for volunteers, all for others\r\n  let visibleEvents = events;\r\n  if (user.role === 'Voluntar') {\r\n    visibleEvents = events.filter(event => visible.includes(event._id));\r\n  } else {\r\n    visibleEvents = events.filter(event => !hidden.includes(event._id));\r\n  }\r\n  if (!visibleEvents.length) return <Typography mt={4}>Nu există evenimente.</Typography>;\r\n\r\n  return (\r\n    <>\r\n      <List>\r\n        {visibleEvents.map(event => {\r\n          // Check if volunteer is registered\r\n          const isRegistered = user.role === 'Voluntar' && event.volunteers && event.volunteers.some(v => (v.id || v._id) === user.id);\r\n          return (\r\n            <Card key={event._id} sx={{ mb: 2 }}>\r\n              <CardContent>\r\n                <Typography variant=\"h6\">{event.title}</Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\r\n                  <AccessTime fontSize=\"small\" />\r\n                  {new Date(event.date).toLocaleString('ro-RO')}\r\n                </Typography>\r\n                {event.endDate && (\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\r\n                    <AccessTime fontSize=\"small\" />\r\n                    Până la: {new Date(event.endDate).toLocaleString('ro-RO')}\r\n                  </Typography>\r\n                )}\r\n                {event.location && (\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" sx={{ display: 'flex', alignItems: 'center', gap: 1, mb: 1 }}>\r\n                    <LocationOn fontSize=\"small\" />\r\n                    {event.location.name || event.location.address || 'Locație specificată'}\r\n                  </Typography>\r\n                )}\r\n                {event.description && (\r\n                  <Typography variant=\"body2\" sx={{ mb: 2 }}>\r\n                    {event.description}\r\n                  </Typography>\r\n                )}\r\n                <Box display=\"flex\" gap={1} flexWrap=\"wrap\">\r\n                  <Button component={Link} to={`/events/${event._id}`} variant=\"outlined\" size=\"small\">\r\n                    Detalii\r\n                  </Button>\r\n                  <Button \r\n                    onClick={() => { setSelectedEvent(event); setShowQRCode(true); }} \r\n                    variant=\"outlined\" \r\n                    size=\"small\"\r\n                    startIcon={<QrCode />}\r\n                  >\r\n                    QR Code\r\n                  </Button>\r\n                  <Button \r\n                    onClick={() => setShowQRScanner(true)} \r\n                    variant=\"contained\" \r\n                    size=\"small\"\r\n                    color=\"success\"\r\n                    startIcon={<QrCode />}\r\n                  >\r\n                    Check-in\r\n                  </Button>\r\n                </Box>\r\n                {(user.role === 'Admin' || (user.role === 'Organizator' && event.createdBy === user.id)) && (\r\n                  <>\r\n                    <Button onClick={() => navigate(`/events/code/${event.code}/edit`)} variant=\"contained\" color=\"primary\" sx={{ mt: 1, mr: 1 }}>\r\n                      Editează\r\n                    </Button>\r\n                    <Button onClick={() => handleDelete(event._id)} variant=\"contained\" color=\"error\" sx={{ mt: 1 }}>\r\n                      Șterge\r\n                    </Button>\r\n                  </>\r\n                )}\r\n                {user.role === 'Voluntar' && (\r\n                  <>\r\n                    <Button onClick={() => handleHide(event._id)} variant=\"outlined\" color=\"secondary\" sx={{ mt: 1, mr: 1 }}>\r\n                      Ascunde\r\n                    </Button>\r\n                    {isRegistered && (\r\n                      <Button onClick={() => handleExit(event._id)} variant=\"contained\" color=\"warning\" sx={{ mt: 1 }}>\r\n                        Retrage-te\r\n                      </Button>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          );\r\n        })}\r\n      </List>\r\n\r\n      {/* QR Code Display Dialog */}\r\n      <Dialog open={showQRCode} onClose={() => setShowQRCode(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>QR Code pentru Check-in</DialogTitle>\r\n        <DialogContent>\r\n          <Box display=\"flex\" flexDirection=\"column\" alignItems=\"center\" gap={2}>\r\n            <Typography variant=\"h6\">{selectedEvent?.title}</Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Cod eveniment: {selectedEvent?.code}\r\n            </Typography>\r\n            {selectedEvent?.qrCode && (\r\n              <Box>\r\n                <img \r\n                  src={selectedEvent.qrCode} \r\n                  alt=\"QR Code\" \r\n                  style={{ maxWidth: '100%', height: 'auto' }}\r\n                />\r\n              </Box>\r\n            )}\r\n            <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\r\n              Scanați acest QR code pentru a vă înregistra la eveniment\r\n            </Typography>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setShowQRCode(false)}>Închide</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* QR Code Scanner Dialog */}\r\n      <QRCodeScanner\r\n        open={showQRScanner}\r\n        onClose={() => setShowQRScanner(false)}\r\n        onSuccess={(data) => {\r\n          console.log('Check-in successful:', data);\r\n          // Optionally refresh events or show success message\r\n        }}\r\n      />\r\n    </>\r\n  );\r\n} \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}