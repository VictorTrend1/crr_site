{"ast":null,"code":"import _objectSpread from\"C:/Users/trand/Documents/site_crr/site/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{TextField,Button,Box,Typography,Alert}from'@mui/material';import{getEventByCode,editEventByCode}from'../api';import{useParams,useNavigate}from'react-router-dom';import{LocalizationProvider,DateTimePicker}from'@mui/x-date-pickers';import{AdapterDateFns}from'@mui/x-date-pickers/AdapterDateFns';import roLocale from'date-fns/locale/ro';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EventEditForm(){const{code}=useParams();const[event,setEvent]=useState(null);const[title,setTitle]=useState('');const[description,setDescription]=useState('');const[date,setDate]=useState(null);const[actionReportLink,setActionReportLink]=useState('');const[error,setError]=useState('');const[success,setSuccess]=useState('');const navigate=useNavigate();useEffect(()=>{async function fetchEvent(){try{const res=await getEventByCode(code);setEvent(res.data);setTitle(res.data.title);setDescription(res.data.description);setDate(res.data.date?new Date(res.data.date):null);setActionReportLink(res.data.actionReport||'');}catch(_unused){setError('Nu s-a putut încărca evenimentul');}}fetchEvent();},[code]);const handleSubmit=async e=>{e.preventDefault();setError('');setSuccess('');try{await editEventByCode(code,{title,description,date:date?date.toISOString():'',actionReport:actionReportLink});setSuccess('Eveniment actualizat!');setTimeout(()=>navigate(\"/events/\".concat(event._id)),1000);}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Eroare la actualizare');}};if(!event)return/*#__PURE__*/_jsx(Typography,{children:\"Se \\xEEncarc\\u0103...\"});return/*#__PURE__*/_jsxs(Box,{maxWidth:500,mx:\"auto\",mt:4,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",mb:2,children:\"Editeaz\\u0103 evenimentul\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error}),success&&/*#__PURE__*/_jsx(Alert,{severity:\"success\",children:success}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(TextField,{label:\"Titlu\",fullWidth:true,margin:\"normal\",value:title,onChange:e=>setTitle(e.target.value),required:true}),/*#__PURE__*/_jsx(TextField,{label:\"Descriere\",fullWidth:true,margin:\"normal\",value:description,onChange:e=>setDescription(e.target.value)}),/*#__PURE__*/_jsx(LocalizationProvider,{dateAdapter:AdapterDateFns,adapterLocale:roLocale,children:/*#__PURE__*/_jsx(DateTimePicker,{label:\"Dat\\u0103 \\u0219i or\\u0103\",value:date,onChange:setDate,renderInput:params=>/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({},params),{},{fullWidth:true,margin:\"normal\",required:true}))})}),/*#__PURE__*/_jsxs(Box,{mt:2,mb:2,children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:\"Link Fi\\u0219a de interven\\u021Bie:\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,placeholder:\"https://...\",value:actionReportLink,onChange:e=>setActionReportLink(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",fullWidth:true,sx:{mt:2},children:\"Salveaz\\u0103\"})]})]});}","map":{"version":3,"names":["React","useState","useEffect","TextField","Button","Box","Typography","Alert","getEventByCode","editEventByCode","useParams","useNavigate","LocalizationProvider","DateTimePicker","AdapterDateFns","roLocale","jsx","_jsx","jsxs","_jsxs","EventEditForm","code","event","setEvent","title","setTitle","description","setDescription","date","setDate","actionReportLink","setActionReportLink","error","setError","success","setSuccess","navigate","fetchEvent","res","data","Date","actionReport","_unused","handleSubmit","e","preventDefault","toISOString","setTimeout","concat","_id","err","_err$response","_err$response$data","response","msg","children","maxWidth","mx","mt","variant","mb","severity","onSubmit","label","fullWidth","margin","value","onChange","target","required","dateAdapter","adapterLocale","renderInput","params","_objectSpread","placeholder","type","color","sx"],"sources":["C:/Users/trand/Documents/site_crr/site/src/components/EventEditForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { TextField, Button, Box, Typography, Alert } from '@mui/material';\r\nimport { getEventByCode, editEventByCode } from '../api';\r\n\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { LocalizationProvider, DateTimePicker } from '@mui/x-date-pickers';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport roLocale from 'date-fns/locale/ro';\r\n\r\nexport default function EventEditForm() {\r\n  const { code } = useParams();\r\n\r\n  const [event, setEvent] = useState(null);\r\n  const [title, setTitle] = useState('');\r\n  const [description, setDescription] = useState('');\r\n  const [date, setDate] = useState(null);\r\n\r\n  const [actionReportLink, setActionReportLink] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchEvent() {\r\n      try {\r\n        const res = await getEventByCode(code);\r\n        setEvent(res.data);\r\n        setTitle(res.data.title);\r\n        setDescription(res.data.description);\r\n        setDate(res.data.date ? new Date(res.data.date) : null);\r\n        setActionReportLink(res.data.actionReport || '');\r\n      } catch {\r\n        setError('Nu s-a putut încărca evenimentul');\r\n      }\r\n    }\r\n    fetchEvent();\r\n  }, [code]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(''); setSuccess('');\r\n    try {\r\n      await editEventByCode(code, { title, description, date: date ? date.toISOString() : '', actionReport: actionReportLink });\r\n      setSuccess('Eveniment actualizat!');\r\n      setTimeout(() => navigate(`/events/${event._id}`), 1000);\r\n    } catch (err) {\r\n      setError(err.response?.data?.msg || 'Eroare la actualizare');\r\n    }\r\n  };\r\n\r\n  if (!event) return <Typography>Se încarcă...</Typography>;\r\n\r\n  return (\r\n    <Box maxWidth={500} mx=\"auto\" mt={4}>\r\n      <Typography variant=\"h6\" mb={2}>Editează evenimentul</Typography>\r\n      {error && <Alert severity=\"error\">{error}</Alert>}\r\n      {success && <Alert severity=\"success\">{success}</Alert>}\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField label=\"Titlu\" fullWidth margin=\"normal\" value={title} onChange={e => setTitle(e.target.value)} required />\r\n        <TextField label=\"Descriere\" fullWidth margin=\"normal\" value={description} onChange={e => setDescription(e.target.value)} />\r\n        <LocalizationProvider dateAdapter={AdapterDateFns} adapterLocale={roLocale}>\r\n          <DateTimePicker\r\n            label=\"Dată și oră\"\r\n            value={date}\r\n            onChange={setDate}\r\n            renderInput={(params) => <TextField {...params} fullWidth margin=\"normal\" required />}\r\n          />\r\n        </LocalizationProvider>\r\n        <Box mt={2} mb={2}>\r\n          <Typography variant=\"body2\">Link Fișa de intervenție:</Typography>\r\n          <TextField fullWidth placeholder=\"https://...\" value={actionReportLink} onChange={e => setActionReportLink(e.target.value)} />\r\n        </Box>\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth sx={{ mt: 2 }}>Salvează</Button>\r\n      </form>\r\n    </Box>\r\n  );\r\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}